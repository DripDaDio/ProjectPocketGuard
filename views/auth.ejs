<%- include('partials/_head') %>

<div class="auth-container">
  <!-- Background with gradient and illustrations -->
  <div class="auth-background">
    <!-- Animated organic blobs -->
    <div class="organic-blob blob-coral-1"></div>
    <div class="organic-blob blob-coral-2"></div>
    <div class="organic-blob blob-yellow-1"></div>
    <div class="organic-blob blob-peach-1"></div>
    
    <!-- Floating coins -->
    <div class="floating-coins">
      <div class="coin-item coin-1">
        <div class="coin-face">
          <span class="yen-symbol">¥</span>
        </div>
      </div>
      <div class="coin-item coin-2">
        <div class="coin-face">
          <span class="yen-symbol">¥</span>
        </div>
      </div>
      <div class="coin-item coin-3">
        <div class="coin-face">
          <span class="yen-symbol">¥</span>
        </div>
      </div>
    </div>
    
    <!-- Receipt/Document -->
    <div class="receipt-paper">
      <div class="receipt-line"></div>
      <div class="receipt-line"></div>
      <div class="receipt-line"></div>
      <div class="receipt-line"></div>
      <div class="receipt-line"></div>
    </div>
    
    <!-- Stock chart left -->
    <div class="stock-chart-element chart-left">
      <svg width="220" height="140" viewBox="0 0 220 140">
        <polyline
          class="chart-line-animated"
          fill="none"
          stroke="#E66D57"
          stroke-width="3"
          points="10,100 40,80 70,90 100,60 130,70 160,40 190,50 210,30"
        />
        <circle class="chart-point" cx="10" cy="100" r="4" fill="#E66D57"/>
        <circle class="chart-point" cx="40" cy="80" r="4" fill="#E66D57"/>
        <circle class="chart-point" cx="70" cy="90" r="4" fill="#E66D57"/>
        <circle class="chart-point" cx="100" cy="60" r="4" fill="#E66D57"/>
        <circle class="chart-point" cx="130" cy="70" r="4" fill="#E66D57"/>
        <circle class="chart-point" cx="160" cy="40" r="4" fill="#E66D57"/>
        <circle class="chart-point" cx="190" cy="50" r="4" fill="#E66D57"/>
        <circle class="chart-point" cx="210" cy="30" r="4" fill="#E66D57"/>
        
        <!-- Bars -->
        <rect x="20" y="110" width="12" height="20" fill="rgba(230, 109, 87, 0.6)" rx="2"/>
        <rect x="50" y="100" width="12" height="30" fill="rgba(230, 109, 87, 0.6)" rx="2"/>
        <rect x="80" y="95" width="12" height="35" fill="rgba(230, 109, 87, 0.6)" rx="2"/>
        <rect x="110" y="85" width="12" height="45" fill="rgba(230, 109, 87, 0.6)" rx="2"/>
      </svg>
    </div>
    
    <!-- Pie chart right -->
    <div class="pie-chart-element">
      <svg width="160" height="160" viewBox="0 0 160 160">
        <circle cx="80" cy="80" r="70" fill="#FFD666" class="pie-segment-1"/>
        <path d="M 80 80 L 80 10 A 70 70 0 0 1 136.6 43.4 Z" fill="#E66D57" class="pie-segment-2"/>
        <path d="M 80 80 L 136.6 43.4 A 70 70 0 0 1 136.6 116.6 Z" fill="#FF9B8A" class="pie-segment-3"/>
        <circle cx="80" cy="80" r="45" fill="white" opacity="0.9"/>
        <text x="80" y="85" text-anchor="middle" font-size="24" font-weight="bold" fill="#2C3E50">$$$</text>
      </svg>
    </div>
    
    <!-- Arrow trend indicators -->
    <div class="trend-arrow arrow-up">
      <svg width="60" height="60" viewBox="0 0 60 60">
        <path d="M 30 10 L 50 30 L 40 30 L 40 50 L 20 50 L 20 30 L 10 30 Z" fill="#27AE60"/>
      </svg>
      <div class="trend-text">+15%</div>
    </div>
    
    <!-- Credit Card -->
    <div class="credit-card-float">
      <div class="card-body">
        <div class="card-chip"></div>
        <div class="card-number">•••• 4532</div>
        <div class="card-holder">JOHN DOE</div>
      </div>
    </div>
    
    <!-- Stock ticker tape -->
    <div class="ticker-tape">
      <div class="ticker-items">
        <span class="ticker-item">AAPL <span class="ticker-up">+2.4%</span></span>
        <span class="ticker-item">GOOGL <span class="ticker-up">+1.8%</span></span>
        <span class="ticker-item">MSFT <span class="ticker-down">-0.5%</span></span>
        <span class="ticker-item">TSLA <span class="ticker-up">+3.2%</span></span>
        <span class="ticker-item">AMZN <span class="ticker-down">-1.1%</span></span>
        <span class="ticker-item">META <span class="ticker-up">+2.7%</span></span>
        <span class="ticker-item">NVDA <span class="ticker-up">+4.5%</span></span>
        <span class="ticker-item">NFLX <span class="ticker-up">+1.3%</span></span>
        <span class="ticker-item">AAPL <span class="ticker-up">+2.4%</span></span>
        <span class="ticker-item">GOOGL <span class="ticker-up">+1.8%</span></span>
        <span class="ticker-item">MSFT <span class="ticker-down">-0.5%</span></span>
        <span class="ticker-item">TSLA <span class="ticker-up">+3.2%</span></span>
        <span class="ticker-item">AMZN <span class="ticker-down">-1.1%</span></span>
        <span class="ticker-item">META <span class="ticker-up">+2.7%</span></span>
        <span class="ticker-item">NVDA <span class="ticker-up">+4.5%</span></span>
        <span class="ticker-item">NFLX <span class="ticker-up">+1.3%</span></span>
      </div>
    </div>
    
    <!-- Candlestick chart -->
    <div class="candlestick-chart">
      <svg width="180" height="120" viewBox="0 0 180 120">
        <rect class="candle green" x="10" y="40" width="20" height="50" rx="2"/>
        <line class="wick" x1="20" y1="30" x2="20" y2="90" stroke="#27AE60" stroke-width="2"/>
        
        <rect class="candle red" x="40" y="50" width="20" height="40" rx="2"/>
        <line class="wick" x1="50" y1="40" x2="50" y2="90" stroke="#E74C3C" stroke-width="2"/>
        
        <rect class="candle green" x="70" y="30" width="20" height="60" rx="2"/>
        <line class="wick" x1="80" y1="20" x2="80" y2="90" stroke="#27AE60" stroke-width="2"/>
        
        <rect class="candle green" x="100" y="35" width="20" height="55" rx="2"/>
        <line class="wick" x1="110" y1="25" x2="110" y2="90" stroke="#27AE60" stroke-width="2"/>
        
        <rect class="candle red" x="130" y="45" width="20" height="35" rx="2"/>
        <line class="wick" x1="140" y1="35" x2="140" y2="80" stroke="#E74C3C" stroke-width="2"/>
        
        <rect class="candle green" x="160" y="25" width="20" height="50" rx="2"/>
        <line class="wick" x1="170" y1="15" x2="170" y2="75" stroke="#27AE60" stroke-width="2"/>
      </svg>
    </div>
    
    <!-- Wallet icon -->
    <div class="wallet-icon">
      <div class="wallet-body">
        <div class="wallet-flap"></div>
        <div class="wallet-card"></div>
      </div>
    </div>
    
    <!-- Bar graph floating -->
    <div class="bar-graph-mini">
      <div class="bar bar1"></div>
      <div class="bar bar2"></div>
      <div class="bar bar3"></div>
      <div class="bar bar4"></div>
      <div class="bar bar5"></div>
    </div>
  </div>
  
  <!-- Main Auth Card -->
  <div class="auth-card-modern">
    <div class="auth-logo">
      <img src="/img/pocketguard-logo.svg" alt="PocketGuard" class="logo-image">
    </div>
    
    <% if (typeof error !== 'undefined' && error) { %>
      <div class="alert alert-error-modern" role="alert">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>
        </svg>
        <%= error %>
      </div>
    <% } %>
    
    <% if (typeof success !== 'undefined' && success && mode === 'login') { %>
      <div class="alert alert-success-modern" role="status">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm-2 15l-5-5 1.41-1.41L8 12.17l7.59-7.59L17 6l-9 9z"/>
        </svg>
        <%= success %>
      </div>
    <% } %>
    
    <form action="/<%= mode %>" method="post" class="modern-form">
      <% if (mode === 'register') { %>
        <div class="form-group-modern">
          <label for="name" class="form-label-modern">Full Name</label>
          <input 
            id="name" 
            type="text" 
            name="name" 
            class="form-input-modern"
            placeholder="John Doe"
            autocomplete="name"
          >
        </div>
      <% } %>
      
      <div class="form-group-modern">
        <label for="email" class="form-label-modern">Email Address</label>
        <input 
          id="email" 
          type="email" 
          name="email" 
          class="form-input-modern"
          placeholder="johndoe@email.com"
          required 
          autocomplete="email"
        >
      </div>
      
      <div class="form-group-modern">
        <label for="password" class="form-label-modern">Password</label>
        <div class="password-input-wrapper">
          <input 
            id="password" 
            type="password" 
            name="password" 
            class="form-input-modern"
            placeholder="••••••••••••"
            required
            autocomplete="<%= mode === 'register' ? 'new-password' : 'current-password' %>"
          >
          <button type="button" class="password-toggle" onclick="togglePassword()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
          </button>
        </div>
        <% if (mode === 'login') { %>
          <a href="/forgot" class="forgot-link">Forgot Password?</a>
        <% } %>
      </div>
      
      <% if (mode === 'login') { %>
        <div class="remember-me">
          <label class="checkbox-modern">
            <input type="checkbox" name="remember">
            <span class="checkmark"></span>
            <span class="checkbox-label">Keep me signed in</span>
          </label>
        </div>
      <% } %>
      
      <button type="submit" class="btn-primary-modern">
        <%= mode === 'register' ? 'Create Account' : 'Login' %>
      </button>
      
      <div class="divider-modern">
        <span>or sign in with</span>
      </div>
      
      <button type="button" class="btn-google-modern">
        <svg width="20" height="20" viewBox="0 0 24 24">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Continue with Google
      </button>
      
      <p class="auth-switch-modern">
        <%= mode === 'register' ? 'Already have an account?' : "Don't have an account?" %>
        <a href="/<%= mode === 'register' ? 'login' : 'register' %>" class="switch-link">
          <%= mode === 'register' ? 'Sign in' : 'Create an account' %>
        </a>
      </p>
    </form>
  </div>
</div>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  overflow-x: hidden;
}

.auth-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

.auth-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  background: linear-gradient(135deg, #FFF9F0 0%, #FFE8C5 30%, #FFCC80 50%, #FFE8C5 70%, #FFF5E6 100%);
  background-size: 200% 200%;
  animation: gradientShift 20s ease infinite;
  overflow: hidden;
}

@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Organic flowing blobs */
.organic-blob {
  position: absolute;
  border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
  filter: blur(0px);
  animation: morphBlob 20s ease-in-out infinite;
}

.blob-coral-1 {
  width: 800px;
  height: 600px;
  background: linear-gradient(135deg, #ED7D31 0%, #FCC03E 50%, #FFE4B5 100%);
  top: -100px;
  left: -100px;
  animation: morphBlob 25s ease-in-out infinite, floatBlob 30s ease-in-out infinite;
  opacity: 0.4;
}

.blob-coral-2 {
  width: 900px;
  height: 700px;
  background: linear-gradient(135deg, #FFEFD5 0%, #ED7D31 50%, #FCC03E 100%);
  top: 20%;
  left: 10%;
  animation: morphBlob 30s ease-in-out infinite reverse, floatBlob 35s ease-in-out infinite;
  animation-delay: 2s;
  opacity: 0.4;
}

.blob-yellow-1 {
  width: 700px;
  height: 600px;
  background: linear-gradient(135deg, #FCC03E 0%, #ED7D31 50%, #FFF5E6 100%);
  top: -150px;
  right: -150px;
  animation: morphBlob 28s ease-in-out infinite, floatBlob 32s ease-in-out infinite;
  animation-delay: 1s;
  opacity: 0.4;
}

.blob-peach-1 {
  width: 500px;
  height: 400px;
  background: linear-gradient(135deg, #FFEBCD 0%, #FCC03E 50%, #ED7D31 100%);
  bottom: 0;
  left: 20%;
  animation: morphBlob 22s ease-in-out infinite, floatBlob 28s ease-in-out infinite;
  animation-delay: 3s;
  opacity: 0.4;
}

@keyframes morphBlob {
  0%, 100% {
    border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
  }
  25% {
    border-radius: 58% 42% 75% 25% / 76% 46% 54% 24%;
  }
  50% {
    border-radius: 50% 50% 33% 67% / 55% 27% 73% 45%;
  }
  75% {
    border-radius: 33% 67% 58% 42% / 63% 68% 32% 37%;
  }
}

@keyframes floatBlob {
  0%, 100% {
    transform: translate(0, 0) rotate(0deg) scale(1);
  }
  33% {
    transform: translate(30px, -30px) rotate(5deg) scale(1.05);
  }
  66% {
    transform: translate(-20px, 20px) rotate(-3deg) scale(0.95);
  }
}

/* Floating coins */
.floating-coins {
  position: absolute;
  top: 80px;
  left: 140px;
}

.coin-item {
  position: absolute;
  width: 70px;
  height: 70px;
  animation: coinFloat 4s ease-in-out infinite;
}

.coin-1 {
  left: 0;
  top: 0;
  animation-delay: 0s;
}

.coin-2 {
  left: 40px;
  top: 50px;
  animation-delay: 0.5s;
}

.coin-3 {
  left: -20px;
  top: 100px;
  animation-delay: 1s;
}

.coin-face {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #FFD700 0%, #FFC700 50%, #FFD700 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 
    inset -3px -3px 8px rgba(0, 0, 0, 0.15),
    inset 3px 3px 8px rgba(255, 255, 255, 0.5),
    0 8px 20px rgba(255, 215, 0, 0.3);
  border: 3px solid #FFED4E;
  animation: coinRotate 6s linear infinite;
}

.yen-symbol {
  font-size: 32px;
  font-weight: bold;
  color: #CC9900;
  text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
}

@keyframes coinFloat {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-25px) rotate(180deg);
  }
}

@keyframes coinRotate {
  0% {
    transform: rotateY(0deg);
  }
  100% {
    transform: rotateY(360deg);
  }
}

/* Receipt paper */
.receipt-paper {
  position: absolute;
  top: 50px;
  right: 150px;
  width: 140px;
  height: 180px;
  background: linear-gradient(135deg, #F5F5F5 0%, #FFFFFF 100%);
  border-radius: 8px;
  padding: 20px 15px;
  box-shadow: 
    0 10px 30px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
  transform: rotate(-8deg);
  animation: receiptFloat 6s ease-in-out infinite;
}

.receipt-line {
  width: 100%;
  height: 8px;
  background: #D0D0D0;
  border-radius: 4px;
  margin-bottom: 12px;
}

.receipt-line:nth-child(1) {
  width: 80%;
}

.receipt-line:nth-child(3) {
  width: 90%;
}

.receipt-line:nth-child(4) {
  width: 70%;
}

@keyframes receiptFloat {
  0%, 100% {
    transform: rotate(-8deg) translateY(0);
  }
  50% {
    transform: rotate(-5deg) translateY(-15px);
  }
}

/* Stock chart element */
.stock-chart-element {
  position: absolute;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  animation: chartFloat 6s ease-in-out infinite;
}

.chart-left {
  bottom: 100px;
  left: 150px;
}

@keyframes chartFloat {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-15px);
  }
}

.chart-line-animated {
  filter: drop-shadow(0 2px 4px rgba(230, 109, 87, 0.3));
  animation: lineDraw 3s ease-in-out infinite;
}

@keyframes lineDraw {
  0%, 100% {
    stroke-dasharray: 1000;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 1000;
    stroke-dashoffset: 50;
  }
}

.chart-point {
  animation: pointPulse 2s ease-in-out infinite;
}

.chart-point:nth-child(2) { animation-delay: 0.2s; }
.chart-point:nth-child(3) { animation-delay: 0.4s; }
.chart-point:nth-child(4) { animation-delay: 0.6s; }
.chart-point:nth-child(5) { animation-delay: 0.8s; }
.chart-point:nth-child(6) { animation-delay: 1s; }
.chart-point:nth-child(7) { animation-delay: 1.2s; }
.chart-point:nth-child(8) { animation-delay: 1.4s; }

@keyframes pointPulse {
  0%, 100% {
    r: 4;
    opacity: 1;
  }
  50% {
    r: 6;
    opacity: 0.7;
  }
}

/* Pie chart element */
.pie-chart-element {
  position: absolute;
  bottom: 120px;
  right: 180px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 50%;
  padding: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  animation: pieRotate 8s linear infinite;
}

@keyframes pieRotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.pie-segment-1 {
  animation: segmentPulse 4s ease-in-out infinite;
}

.pie-segment-2 {
  animation: segmentPulse 4s ease-in-out infinite;
  animation-delay: 0.5s;
}

.pie-segment-3 {
  animation: segmentPulse 4s ease-in-out infinite;
  animation-delay: 1s;
}

@keyframes segmentPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}

/* Trend arrow */
.trend-arrow {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  animation: arrowBounce 3s ease-in-out infinite;
}

.arrow-up {
  top: 120px;
  right: 100px;
}

@keyframes arrowBounce {
  0%, 100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-10px) scale(1.1);
  }
}

.trend-text {
  margin-top: 5px;
  font-size: 18px;
  font-weight: bold;
  color: #27AE60;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Credit Card */
.credit-card-float {
  position: absolute;
  top: 200px;
  left: 120px;
  animation: cardFloat 6s ease-in-out infinite;
}

.card-body {
  width: 200px;
  height: 130px;
  background: linear-gradient(135deg, #2D3E68 0%, #34495E 100%);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 4px 15px rgba(45, 62, 104, 0.2);
  position: relative;
  overflow: hidden;
}

@keyframes cardFloat {
  0%, 100% {
    transform: translateY(0) rotate(-5deg);
  }
  50% {
    transform: translateY(-20px) rotate(-8deg);
  }
}

.card-chip {
  width: 50px;
  height: 40px;
  background: linear-gradient(135deg, #FFD700 0%, #FFC700 100%);
  border-radius: 8px;
  margin-bottom: 25px;
}

.card-number {
  color: white;
  font-size: 18px;
  font-weight: 600;
  letter-spacing: 3px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  margin-bottom: 10px;
  white-space: nowrap;
}

.card-holder {
  color: rgba(255, 255, 255, 0.8);
  font-size: 12px;
  letter-spacing: 1px;
  white-space: nowrap;
}

/* Stock ticker tape */
.ticker-tape {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  background: rgba(45, 62, 104, 0.9);
  padding: 12px 0;
  overflow: hidden;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
}

.ticker-items {
  display: flex;
  gap: 40px;
  animation: tickerScroll 30s linear infinite;
  white-space: nowrap;
}

@keyframes tickerScroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.ticker-item {
  color: white;
  font-weight: 600;
  font-size: 16px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

.ticker-up {
  color: #27AE60;
}

.ticker-down {
  color: #E74C3C;
}

/* Candlestick chart */
.candlestick-chart {
  position: absolute;
  top: 180px;
  right: 120px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  animation: chartFloat 7s ease-in-out infinite;
  animation-delay: 1s;
}

.candle {
  animation: candleGrow 3s ease-in-out infinite;
}

.candle.green {
  fill: #27AE60;
}

.candle.red {
  fill: #E74C3C;
}

@keyframes candleGrow {
  0%, 100% {
    transform: scaleY(1);
    transform-origin: bottom;
  }
  50% {
    transform: scaleY(1.1);
    transform-origin: bottom;
  }
}

/* Wallet icon */
.wallet-icon {
  position: absolute;
  bottom: 150px;
  left: 80px;
  animation: walletBounce 4s ease-in-out infinite;
}

@keyframes walletBounce {
  0%, 100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-15px) scale(1.05);
  }
}

.wallet-body {
  width: 100px;
  height: 70px;
  background: linear-gradient(135deg, #FF9A76 0%, #ED7D31 100%);
  border-radius: 12px;
  position: relative;
  box-shadow: 0 4px 10px rgba(237, 125, 49, 0.15);
}

.wallet-flap {
  width: 100%;
  height: 20px;
  background: linear-gradient(135deg, #ED7D31 0%, #D66B28 100%);
  border-radius: 12px 12px 0 0;
  position: absolute;
  top: -10px;
}

.wallet-card {
  width: 70px;
  height: 40px;
  background: linear-gradient(135deg, #FFE4B5 0%, #FCC03E 100%);
  border-radius: 6px;
  position: absolute;
  top: 15px;
  left: 15px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

/* Bar graph mini */
.bar-graph-mini {
  position: absolute;
  top: 250px;
  right: 250px;
  display: flex;
  align-items: flex-end;
  gap: 8px;
  padding: 15px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
  animation: chartFloat 5s ease-in-out infinite;
  animation-delay: 2s;
}

.bar {
  width: 20px;
  border-radius: 4px 4px 0 0;
  animation: barGrow 2s ease-in-out infinite;
}

.bar1 {
  height: 40px;
  background: linear-gradient(180deg, #FFB366 0%, #FF9A76 100%);
  animation-delay: 0s;
}

.bar2 {
  height: 60px;
  background: linear-gradient(180deg, #E66D57 0%, #FF9B8A 100%);
  animation-delay: 0.2s;
}

.bar3 {
  height: 50px;
  background: linear-gradient(180deg, #FFD666 0%, #FFCC33 100%);
  animation-delay: 0.4s;
}

.bar4 {
  height: 70px;
  background: linear-gradient(180deg, #27AE60 0%, #2ECC71 100%);
  animation-delay: 0.6s;
}

.bar5 {
  height: 55px;
  background: linear-gradient(180deg, #FFEFD5 0%, #FFE4B5 100%);
  animation-delay: 0.8s;
}

@keyframes barGrow {
  0%, 100% {
    transform: scaleY(1);
  }
  50% {
    transform: scaleY(1.15);
  }
}

/* Hide animations on mobile */
@media (max-width: 1200px) {
  .floating-coins,
  .receipt-paper,
  .stock-chart-element,
  .pie-chart-element,
  .trend-arrow,
  .credit-card-float,
  .candlestick-chart,
  .wallet-icon,
  .bar-graph-mini {
    display: none;
  }
}

/* Auth Card */
.auth-card-modern {
  position: relative;
  z-index: 2;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(30px) saturate(180%);
  -webkit-backdrop-filter: blur(30px) saturate(180%);
  border-radius: 32px;
  padding: 48px;
  width: 100%;
  max-width: 480px;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.1),
    0 0 0 1px rgba(255, 255, 255, 0.5) inset,
    0 0 80px rgba(230, 109, 87, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  animation: liquidGlass 8s ease-in-out infinite;
}

@keyframes liquidGlass {
  0%, 100% {
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(255, 255, 255, 0.5) inset,
      0 0 80px rgba(230, 109, 87, 0.15);
  }
  50% {
    box-shadow: 
      0 12px 40px rgba(0, 0, 0, 0.15),
      0 0 0 1px rgba(255, 255, 255, 0.6) inset,
      0 0 100px rgba(255, 224, 191, 0.2);
  }
}

.auth-card-modern::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 32px;
  padding: 2px;
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.6) 0%, 
    rgba(255, 255, 255, 0.1) 50%, 
    rgba(255, 255, 255, 0.4) 100%);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  animation: glassShine 6s ease-in-out infinite;
}

@keyframes glassShine {
  0%, 100% {
    opacity: 0.5;
  }
  50% {
    opacity: 0.8;
  }
}

.auth-logo {
  text-align: center;
  margin-bottom: 32px;
}

.logo-image {
  max-width: 280px;
  height: auto;
  display: block;
  margin: 0 auto;
}

.alert-error-modern,
.alert-success-modern {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  border-radius: 12px;
  margin-bottom: 24px;
  font-size: 14px;
}

.alert-error-modern {
  background: #fee;
  color: #c33;
  border: 1px solid #fcc;
}

.alert-success-modern {
  background: #e8f5e9;
  color: #2e7d32;
  border: 1px solid #c8e6c9;
}

.modern-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.form-group-modern {
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
}

.form-label-modern {
  font-size: 14px;
  font-weight: 600;
  color: #2c3e50;
}

.form-input-modern {
  width: 100%;
  padding: 14px 16px;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  font-size: 15px;
  transition: all 0.3s ease;
  background: white;
}

.form-input-modern:focus {
  outline: none;
  border-color: #5b8fb9;
  box-shadow: 0 0 0 4px rgba(91, 143, 185, 0.1);
}

.password-input-wrapper {
  position: relative;
}

.password-toggle {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: #999;
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.password-toggle:hover {
  color: #555;
}

.forgot-link {
  font-size: 13px;
  color: #5b8fb9;
  text-decoration: none;
  text-align: right;
  margin-top: 4px;
}

.forgot-link:hover {
  text-decoration: underline;
}

.remember-me {
  margin: -8px 0;
}

.checkbox-modern {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  user-select: none;
}

.checkbox-modern input {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

.checkbox-label {
  font-size: 14px;
  color: #555;
}

.btn-primary-modern {
  width: 100%;
  padding: 16px;
  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(44, 62, 80, 0.3);
}

.btn-primary-modern:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(44, 62, 80, 0.4);
}

.divider-modern {
  text-align: center;
  position: relative;
  margin: 8px 0;
}

.divider-modern span {
  background: rgba(255, 255, 255, 0.95);
  padding: 0 16px;
  color: #999;
  font-size: 13px;
  position: relative;
  z-index: 1;
}

.divider-modern::before {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  height: 1px;
  background: #e0e0e0;
}

.btn-google-modern {
  width: 100%;
  padding: 14px;
  background: white;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  transition: all 0.3s ease;
}

.btn-google-modern:hover {
  border-color: #ccc;
  background: #f8f9fa;
}

.auth-switch-modern {
  text-align: center;
  font-size: 14px;
  color: #666;
  margin-top: 8px;
}

.switch-link {
  color: #5b8fb9;
  text-decoration: none;
  font-weight: 600;
  margin-left: 4px;
}

.switch-link:hover {
  text-decoration: underline;
}

@media (max-width: 768px) {
  .illustration-left,
  .illustration-right {
    display: none;
  }
  
  .auth-card-modern {
    margin: 20px;
    padding: 32px 24px;
  }
  
  .logo-text {
    font-size: 32px;
  }
  
  .butterflies-container {
    display: none;
  }
}





</style>

<script>
function togglePassword() {
  const input = document.getElementById('password');
  input.type = input.type === 'password' ? 'text' : 'password';
}
  constructor(container) {
    this.container = container;
    this.element = this.createButterfly();
    this.x = Math.random() * window.innerWidth;
    this.y = Math.random() * window.innerHeight;
    this.speedX = (Math.random() - 0.5) * 2;
    this.speedY = (Math.random() - 0.5) * 2;
    this.angle = Math.random() * 360;
    this.coinTimer = 0;
    this.coinInterval = 300 + Math.random() * 300; // Drop coin every 300-600ms
    
    this.element.style.left = this.x + 'px';
    this.element.style.top = this.y + 'px';
    container.appendChild(this.element);
  }
  
  createButterfly() {
    const butterfly = document.createElement('div');
    butterfly.className = 'butterfly';
    
    const body = document.createElement('div');
    body.className = 'butterfly-body';
    
    const leftWing = document.createElement('div');
    leftWing.className = 'butterfly-wing left';
    
    const rightWing = document.createElement('div');
    rightWing.className = 'butterfly-wing right';
    
    butterfly.appendChild(leftWing);
    butterfly.appendChild(body);
    butterfly.appendChild(rightWing);
    
    return butterfly;
  }
  
  createCoin() {
    const coin = document.createElement('div');
    coin.className = 'coin-trail';
    coin.style.left = this.x + 15 + 'px';
    coin.style.top = this.y + 15 + 'px';
    this.container.appendChild(coin);
    
    setTimeout(() => {
      coin.remove();
    }, 1500);
  }
  
  update(deltaTime) {
    // Elegant figure-8 and wave patterns
    this.angle += 0.015; // Slower, more graceful movement
    
    // Use sine waves for smooth, elegant curves
    const time = Date.now() * 0.001;
    const baseSpeed = 1.2;
    
    // Create elegant swooping patterns
    this.speedX = Math.sin(this.angle * 2) * baseSpeed;
    this.speedY = Math.cos(this.angle) * baseSpeed + Math.sin(time * 0.5) * 0.3;
    
    this.x += this.speedX;
    this.y += this.speedY;
    
    // Smooth edge wrapping instead of bouncing
    if (this.x < -70) this.x = window.innerWidth;
    if (this.x > window.innerWidth + 70) this.x = -70;
    if (this.y < -60) this.y = window.innerHeight;
    if (this.y > window.innerHeight + 60) this.y = -60;
    
    // Update position
    this.element.style.left = this.x + 'px';
    this.element.style.top = this.y + 'px';
    
    // Smooth rotation following movement direction
    const targetRotation = Math.atan2(this.speedY, this.speedX) * 180 / Math.PI;
    this.element.style.transform = `rotate(${targetRotation + 90}deg)`;
    
    // Drop coins
    this.coinTimer += deltaTime;
    if (this.coinTimer >= this.coinInterval) {
      this.createCoin();
      this.coinTimer = 0;
    }
  }
}

// Initialize butterflies
document.addEventListener('DOMContentLoaded', () => {
  const container = document.getElementById('butterflies-container');
  if (!container) return;
  
  const butterflies = [];
  const butterflyCount = 12; // Number of butterflies
  
  for (let i = 0; i < butterflyCount; i++) {
    butterflies.push(new Butterfly(container));
  }
  
  let lastTime = Date.now();
  
  function animate() {
    const currentTime = Date.now();
    const deltaTime = currentTime - lastTime;
    lastTime = currentTime;
    
    butterflies.forEach(butterfly => butterfly.update(deltaTime));
    requestAnimationFrame(animate);
  }
  
  animate();
});
</script>

<%- include('partials/_footer') %>